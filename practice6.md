## Практическая работа 6

### Выбор БД

**Сервис "Пользователи"** 

Хранение информации о пользователях (имя, email, пароль, адрес, история заказов, предпочтения, роли).  Аутентификация и авторизация пользователей.

**Тип базы данных:** Реляционная база данных (например, PostgreSQL, MySQL).

**Обоснование:**
- Структурированные данные: Информация о пользователях имеет четкую структуру.
- Безопасность: Важна безопасность данных, особенно паролей.
- Целостность данных: Важна целостность данных пользователей.
- Отношения: Необходимы отношения между пользователями, заказами, адресами, ролями.

Альтернативные варианты: Специализированные сервисы аутентификации (Auth0, Firebase Authentication):  Удобны для аутентификации, но могут потребовать дополнительную базу данных для хранения дополнительных данных о пользователях.

**Сервис "Управление производством**

Управление производственным процессом, хранение информации о материалах, станках, процессах, планах производства, статусах производства, контроле качества.

**Тип базы данных:** Реляционная база данных (например, PostgreSQL, MySQL).

**Обоснование:** 
- Структурированные данные. Большинство данных о производстве структурированы.
- Сложные отношения между материалами, процессами, станками, сотрудниками, планами производства.
- Транзакционная целостность. Важна для обеспечения согласованности данных о производстве.
- Сложные запросы: необходимы для планирования производства, отслеживания статуса производства, анализа эффективности.

Альтернативные варианты: Time-Series Database. Для хранения данных о работе станков, температурных режимах и других временных рядов.  Целесообразна для мониторинга и анализа работы оборудования.

**Сервис "Управление складом"** 

Хранение информации о наличии товара на складе (количество, расположение, состояние), материалах, компонентах. Отслеживание перемещений товара и материалов.

**Тип базы данных:** Реляционная база данных (например, PostgreSQL, MySQL).

**Обоснование:**
- Транзакционная целостность критична при изменении количества товара и материалов.
- Атомарность операций. Операции увеличения/уменьшения количества должны быть атомарными.
- Консистентность. Необходимо обеспечивать консистентность данных о запасах.

Альтернативные варианты: NoSQL база данных (Redis). Для хранения оперативной информации о текущем количестве товара для быстрого доступа.

**Сервис "Каталог товаров"**

Хранение и предоставление информации о товарах (название, описание, характеристики, цена, материалы, размеры, изображения, категории, производитель). Обеспечение поиска и фильтрации.

**Тип базы данных:** Реляционная база данных (например, PostgreSQL, MySQL).

**Обоснование:**
- Структурированные данные. Каталог продукции состоит из структурированных данных с четко определенными атрибутами.
- Сложные запросы. Требуется поддержка сложных запросов для поиска, фильтрации и сортировки.
- Транзакционная целостность. Важна транзакционная целостность данных, особенно при изменении цен, наличия товара и других атрибутов.
- Отношения: Необходимы отношения между товарами, категориями, производителями, материалами.

Альтернативные варианты: Документоориентированная база данных (MongoDB): Важна при гибкости структуры данных, например, для хранения дополнительных, часто меняющихся атрибутов.  Но это усложнит сложные запросы и поддержку целостности.

Гибридный подход: Использовать реляционную БД для основных атрибутов и документоориентированную БД для дополнительных.

**Сервис "Заказы"**

Хранение информации о заказах (состав заказа, статус, адрес доставки, платежная информация, история изменений, данные о производстве). Обработка заказов, управление статусами, интеграция с производством.

**Тип базы данных:** Реляционная база данных (например, PostgreSQL, MySQL).

**Обоснование:**
- Транзакционная целостность критически важна при обработке платежей и изменении статуса заказа.
- Отношения: Связи между заказами, пользователями, товарами, платежами, доставкой, данными о производстве.
- Сложные запросы: Требуются для получения информации о заказах по различным критериям.
- ACID-транзакции: Необходимы для гарантии консистентности.

Альтернативные варианты: Документоориентированная база данных (MongoDB). Например, для хранения истории изменений заказа.

**Сервис "Платежи"**

Обработка платежей, интеграция с платежными шлюзами, хранение истории платежей.

**Тип базы данных:** Реляционная база данных (RDBMS) (например, PostgreSQL, MySQL).

**Обоснование:**
- Транзакционная целостность: Критически важна при обработке платежей.
- Безопасность: Важна безопасность данных платежной информации.
- Аудит: Необходим аудит всех операций, связанных с платежами.

Альтернативные варианты:Использование платежных шлюзов. Можно не хранить платежную информацию в собственной базе данных, а использовать API платежных шлюзов.

**Сервис "Управление логистикой"**

Управление доставкой товаров, отслеживание местоположения, планирование маршрутов, интеграция с транспортными компаниями.

**Тип базы данных:** Реляционная база данных (например, PostgreSQL, MySQL) совместно с геопространственной базой данных (PostGIS, MongoDB с GeoJSON).

**Обоснование:**
- Структурированные данные: Информация о доставках, маршрутах.
- Геопространственные данные: Необходимо хранить и обрабатывать географические координаты для отслеживания местоположения и планирования маршрутов.
- Отношения: Связи между заказами, доставками, складами, транспортными компаниями.

### Модели данных

#### Пользователи

**USER**
| Поле | Тип |
| --- | --- |
| user_id | uuid |
| first_name | varchar(50) |
| last_name | varchar(50) |
| middle_name | varchar(50) |
| email | varchar(100) |
| phone | varchar(20) |
| address_id | uuid, nullable |
| role | enum ('customer', ','manager', 'admin') |
| created_at | timestamp |
| updated_at | timestamp |

**ADDRESS**
| Поле | Тип |
| --- | --- |
| address_id | uuid |
| region | varchar(50) |
| city | varchar(50) |
| street | varchar(50) |
| district | varchar(50) |
| postcode | varchar(10) |
| created_at | timestamp |
| updated_at | timestamp |

**Ожидаемый прирост**

| Тип | назначение | Месяц | Квартал |
| --- | --- | --- | --- |
| user | Профиль пользователя | ~ 1000 записей * (1 KB/запись) + ~ 200 записей (изменения) * (0.5 KB/запись) = ~ 1100 KB = ~ 1.1 MB | ~ 3.3 MB |
| address | Адресные данные | ~ 800 записей * (0.5 KB/запись) = ~ 400 KB (предполагаем, что часть пользователей использует один и тот же адрес,либо не указывает адрес) | 1.2 MB |